---
description: "[非推奨] /update-claude-md を使用してください"
argument-hint: [check]
allowed-tools: Read, Glob, Grep, Edit, AskUserQuestion
model: opus
---

# ⚠️ このコマンドは非推奨です

**新しいコマンド**: `/update-claude-md` を使用してください。

このコマンドは後方互換性のために残されていますが、将来のバージョンで削除される予定です。

## 移行ガイド

- 旧: `/suc`
- 新: `/update-claude-md`

詳細は `.claude/docs/command-migration-guide.md` を参照してください。

---

# CLAUDE.md更新提案・適用

現在のCLAUDE.mdをベストプラクティスに照らして分析し、更新提案を生成。ユーザー承認後に適用する。

## 実行モード

| コマンド | 動作 |
|---------|------|
| `/update-claude-md` | 分析→提案→承認→適用 |
| `/update-claude-md check` | 分析レポートのみ出力（適用しない） |

## 実行手順

### 1. 現状分析

1. CLAUDE.mdを読み込む
2. 最近の会話履歴から学んだパターンを振り返る
3. プロジェクト構造を確認
4. `.claude/docs/`ファイルの存在と整合性を確認

### 2. ベストプラクティスチェック

#### サイズと簡潔さ
- **目標**: 300行未満（理想: 60行未満）

#### 指示の数
- **目標**: 100-150個以下

#### 必須の3次元構造
- **WHAT（何を）**: 技術スタック、アーキテクチャ
- **WHY（なぜ）**: プロジェクトの目的
- **HOW（どのように）**: 開発ワークフロー、手順

#### 段階的開示（Progressive Disclosure）
- 詳細は `.claude/docs/` に分離、CLAUDE.mdには参照ポインタ
- docs/更新時はCLAUDE.mdの参照も同期確認

#### アンチパターン検出
- リンター設定の混入
- タスク固有の指示
- 過剰なコードスニペット

### 3. 提案生成

以下の観点から追加すべきルールを検討:

- **新しいパターン**: 繰り返し使用した実装パターン
- **制約事項**: 守るべき制約や注意点
- **コーディング規約**: 発見したベストプラクティス
- **分割提案**: docs/に移動すべき詳細セクション
- **同期修正**: docs/との参照切れ・不整合

### 4. ユーザーへの確認（AskUserQuestion）

提案内容をAskUserQuestionで確認する:

- **追加提案**: 追加するルールを選択（multiSelect: true）
- **修正提案**: 修正を適用するか確認
- **削除提案**: 削除を実行するか確認

### 5. 承認された変更を適用

ユーザーが承認した提案のみをEditツールでCLAUDE.mdに適用する。

### 6. 結果報告

- 適用した変更のサマリーを表示
- 変更後の行数を報告

## 注意事項

- 重複するルールは提案しない
- 肥大化を防ぐため、不要なルールの削除も提案する
- ユーザーが選択しなかった提案は適用しない

## checkモード出力フォーマット

```markdown
# CLAUDE.md 分析レポート

## 基本情報
- ファイル: [パス]
- 行数: X行 [良好/要改善]
- 推定指示数: X個 [良好/要改善]

## 構造分析
- WHAT: [あり/なし]
- WHY: [あり/なし]
- HOW: [あり/なし]

## 段階的開示・docs/同期
- 実装状況: [実装済み/未実装]
- 参照切れ: [なし/あり]

## アンチパターン
- [ ] リンター設定混入
- [ ] タスク固有指示
- [ ] 過剰コードスニペット

## 改善提案
1. [高優先度の提案]
2. [中優先度の提案]
```
