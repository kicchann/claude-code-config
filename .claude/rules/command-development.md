---
paths: /never/match/folder/**
---

# コマンド開発ガイド

このドキュメントは、新しいスラッシュコマンドの追加方法とベストプラクティスを説明します。

## コマンドの追加

### 1. ファイル作成

`<project-root>/.claude/commands/<name>.md` を作成します。

### 2. YAMLフロントマターの設定

各コマンドファイルには、以下のYAMLフロントマターを含める必要があります：

```yaml
---
description: "コマンドの説明"
argument-hint: "引数のヒント（オプション）"
allowed-tools: ["Tool1", "Tool2"] # オプション
model: "sonnet" # haiku / sonnet / opus
---
```

フィールド説明:

- description: コマンドの機能を簡潔に説明（必須）
- argument-hint: 引数の形式や例を示す（オプション）
- allowed-tools: コマンドが使用できるツールを制限（オプション）
- model: 使用するモデル（オプション、デフォルトはsonnet）

### 3. コマンド本文

YAMLフロントマターの後に、Markdown形式でコマンドの詳細な指示を記述します。

### 4. 例

詳細な例は .claude/commands/list-issues.md を参照してください。

### 5. ベストプラクティス

#### 明確な指示

- コマンドの目的と期待される動作を明確に記述
- 手順は番号付きリストで段階的に説明
- エラー処理やエッジケースも考慮

#### 適切なモデル選択

- haiku: 単純なタスク（ファイル一覧表示、単純な検索等）
- sonnet: 標準的なタスク（ほとんどのコマンド）
- opus: 複雑な分析や判断が必要なタスク

#### ツール制限

セキュリティや意図しない操作を防ぐため、allowed-toolsで必要最小限のツールに制限できます。

#### 計画ファイルの管理

- ルートレベル (plans/)
  - ワークスペース横断的な実装計画（.claude/ の改善、横断的な機能等）
  - 実装履歴として保持
- アプリレベル (apps/\*/docs/plans/)
  - 各アプリ固有の実装計画
  - 各リポジトリで独立して管理
  - 個別アプリ作業時は、そのアプリのplansディレクトリを使用

#### スキルの上流追跡

外部リソースを参照するスキルの更新管理については .claude/rules/upstream-tracking-guide.md を参照してください。
